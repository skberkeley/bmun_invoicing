/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package invoice_automation;

import com.google.gson.Gson;
import invoice_automation.handler.RegistrationHandler;
import invoice_automation.model.Address;
import invoice_automation.model.Conference;
import invoice_automation.model.PaymentMethod;
import invoice_automation.model.Registration;
import invoice_automation.model.School;
import invoice_automation.module.GoogleSheetsModule;
import invoice_automation.module.QueryModule;
import invoice_automation.module.QuickBooksModule;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.security.GeneralSecurityException;
import java.time.LocalDate;
import java.util.List;

public class App {
    private static final String O_AUTH_KEYS_PATH = "app/src/main/resources/intuit_oauth_keys.json";

    public static void main(String[] args) throws IOException, GeneralSecurityException {
        Gson gson = new Gson();
        OAuthKeys oAuthKeys = gson.fromJson(new FileReader(O_AUTH_KEYS_PATH), OAuthKeys.class);

        Address address = new Address("", "", "", "", "", "");

        School school = School.builder()
                .schoolName("BMUN")
                .email("treasurer@bmun.org")
                .phoneNumbers(List.of())
                .address(address)
                .build();

        Registration registration = Registration.builder()
                .school(school)
                .numDelegates(10)
                .conference(Conference.FC)
                .registrationDate(LocalDate.of(2023, 9, 4))
                .paymentMethod(PaymentMethod.CARD)
                .build();
        System.out.println(QueryModule.getQueryForCustomerFromSchool("BMUN"));

        //RegistrationHandler handler = new RegistrationHandler(oAuthKeys.getAccessToken(), oAuthKeys.getRealmId(), true);
        //handler.handleRegistration(registration);
    }
}
